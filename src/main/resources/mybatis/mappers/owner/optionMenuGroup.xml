<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yogiyo.owner.dao.OptionMenuGroupDao">

	<select id="selectByGroupName" parameterType="int" resultType="String">
        select
            distinct  g.group_name      as groupName
        from
            yogiyo_option_menu s, yogiyo_store_option_group m, yogiyo_option_group g
        where
            s.option_menu_no = m.option_menu_no
            and m.option_group_no = g.option_group_no
            and g.option_group_no = #{groupNo}
    </select>
    
    <select id="selectGroupIncludeOptionMenu" parameterType="int" resultType="com.yogiyo.owner.dto.StoreOptionMenuGroupDto">
        select
            g.option_group_no       as groupNo,
            g.group_name            as groupName,
            g.group_description     as groupDescription,
            s.option_menu_no        as optionMenuNo,
            s.option_menu_name      as optionMenuName,
            s.option_menu_price     as optionMenuPrice,
            s.option_menu_thumbnail as optionMenuThumbnail,
            m.menu_no				as menuNo
        from
            yogiyo_option_menu s, yogiyo_store_option_group m, yogiyo_option_group g
        where
            s.option_menu_no = m.option_menu_no
            and m.option_group_no = g.option_group_no
            and g.option_group_no = #{groupNo}
    </select>

	<select id="selectGroupNo" parameterType="String" resultType="int">
        select
            distinct option_group_no        as no
        from
            yogiyo_store_option_group
    </select>

	<select id="nextVal" resultType="int">
		select yogiyo_option_group_seq.nextVal
		from dual
	</select>
	
	<insert id="insertOptionMenuGroup" parameterType="java.util.List">
        <foreach collection="list" item="item" index="index" open="INSERT ALL " separator=" " close="SELECT * FROM DUAL">
            into yogiyo_store_option_group
                (option_group_no, option_menu_no, menu_no)
            values
                (#{item.groupNo}, #{item.optionMenuNo}, #{item.menuNo})
        </foreach>
    </insert>
	
	<insert id="insertOptionMenuGroupDetail" parameterType="com.yogiyo.owner.vo.MenuGroup">
        insert into yogiyo_option_group
        (option_group_no, group_name, group_description)
        values
        (#{no}, #{name}, #{description})
    </insert>

</mapper>